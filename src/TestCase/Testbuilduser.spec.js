const { test, expect } = require('@playwright/test');

test('р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Бр╕ер╕░р╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щ', async ({ page }) => {
  // 1. р╣Др╕Ыр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ Login
  await page.goto('https://w01.pupasoft.com/login');
  console.log('тЬЕ р╣Др╕Ыр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ Login');

  // 2. р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╕кр╕бр╕▒р╕Др╕г" р╣Ар╕Юр╕╖р╣Ир╕нр╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б
  await page.click('text=р╕кр╕бр╕▒р╕Др╕г');
  console.log('тЬЕ р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б "р╕кр╕бр╕▒р╕Др╕г" р╣Ар╕Юр╕╖р╣Ир╕нр╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б');

  // 3. р╕гр╕нр╣Гр╕лр╣Йр╕лр╕Щр╣Йр╕▓р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Вр╕лр╕ер╕Ф
  await page.waitForSelector('input[placeholder="р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й"]');
  console.log("тЬЕ р╕нр╕вр╕╣р╣Ир╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Бр╕ер╣Йр╕з");

  // 4. р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б (р╕гр╕зр╕бр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ)
  const username = 'usernew4';
  const email = 'usernew24@example.com';
  const password = 'passwordtest343';

  await page.fill('input[placeholder="р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й"]', username);
  await page.fill('input[placeholder="р╕нр╕╡р╣Ар╕бр╕е"]', email); // р╣Гр╕Кр╣Й placeholder р╕Вр╕нр╕Зр╕нр╕╡р╣Ар╕бр╕е
  await page.fill('input[placeholder="р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ"]', password); // р╣Гр╕Кр╣Й placeholder р╕Вр╕нр╕Зр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ
  await page.fill('input[placeholder="р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ"]', password); // тЬЕ р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ
  console.log('ЁЯУМ р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б + р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з');

  // 5. р╕Бр╕Фр╕Ыр╕╕р╣Ир╕бр╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б
  await page.click('button[type="submit"]');
  console.log('тЬЕ р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕бр╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б');

  // 6. р╕гр╕нр╣Гр╕лр╣Йр╕кр╕бр╕▒р╕Др╕гр╕кр╕│р╣Ар╕гр╣Зр╕И
  await page.waitForSelector('div.success-message', { timeout: 5000 });
  console.log('ЁЯОЙ р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╕кр╕│р╣Ар╕гр╣Зр╕И!');

});

